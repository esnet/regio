name: stats
info: |
  This block describes a register-indirect interface for
  accessing statistics data stored in counter arrays.
regs:
  - name: info
    desc: Info register.
    width: 32
    count: 1
    access: ro
    fields:
      - name: stats_type
        desc: Type of stats array.
        width: 8
        enum_hex:
          0 : COUNT
          1 : PKT_BYTE_COUNT
          2 : HISTOGRAM
  - name: info_depth
    desc: Size (depth) of stats array. The number of stats records that are being maintained.
    width: 32
    access: ro
  - name: info_record
    desc: Describes size/format of stats records.
    width: 32
    access: ro
    fields:
      - name: num_bins
        desc: Describes the number of counts comprising a stats record. Depending on context, could equal 2 for packet/byte counts, or 8 for a histogram with 8 bins per record.
        width: 8
      - name: count_wid
        desc: Describes the width of each count, in bits.
        width: 8
  - name: status
    desc: Status register.
    width: 32
    fields:
      - name: code
        desc: Status.
        width: 8
        enum_hex:
          0 : RESET
          1 : READY
          2 : READING
      - name: bin
        desc: Bin index for current read data. Encoding is dependent on stats type. e.g. for packet/byte counters, 0 -> packet count, 1 -> byte count. e.g. for histograms, 0 -> bin 0 count, 1 -> bin 1 count, ...
        width: 8
  - name: command
    desc: Command register
    width: 32
    access: wr_evt
    fields:
      - name: code
        desc: Command.
        width: 8
        enum_hex:
          0 : RD
          1 : RD_CLEAR
          2 : CLEAR_ALL
  - name: id
    desc: Record select (ID) register.
    access: rw
    count: 1
    width: 32
  - name: count_hi
    desc: Count register (upper 32 bits).
    access: ro
    width: 32
  - name: count_lo
    desc: Count register (lower 32 bits).
    access: rd_evt
    width: 32

